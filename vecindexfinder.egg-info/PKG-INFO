Metadata-Version: 2.2
Name: vecindexfinder
Version: 0.1.0
Summary: 向量数据库索引参数推荐工具
Home-page: https://github.com/yourusername/vecindexfinder
Author: VecIndexFinder Team
Author-email: your.email@example.com
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: psycopg2-binary>=2.9.3
Requires-Dist: pandas>=1.3.5
Requires-Dist: seaborn>=0.11.2
Requires-Dist: pyyaml>=6.0
Requires-Dist: tqdm>=4.62.3
Requires-Dist: numpy>=1.21.5
Requires-Dist: pydantic>=2.10.6
Requires-Dist: optuna>=3.3.0
Requires-Dist: plotly>=5.19.0
Requires-Dist: h5py==3.8.0
Requires-Dist: tabulate>=0.9.0
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# 向量数据库索引参数推荐工具 (VecIndexFinder)

这是一个向量数据库索引参数推荐工具，帮助用户为向量数据库表选择最优的索引参数配置。该工具支持从数据库表中采样数据，测试不同索引参数的性能，并推荐最佳参数组合。

## 主要功能

- 数据采样：从向量数据库表中采样一定比例的数据
- 索引测试：支持多种索引类型（IVF-FLAT, IVF-PQ, HNSW, DiskANN等）
- 参数优化：测试不同参数组合的性能（QPS和召回率）
- 性能分析：基于测试结果推荐最优参数配置
- 结果可视化：生成性能对比图表

## 支持的数据库

- Milvus
- OpenGauss
- PGVector
- 可扩展支持更多数据库

## 安装

### 环境要求

- Python 3.8+
- 支持的向量数据库客户端

### 安装方式

#### 使用pip安装（推荐）

```bash
pip install vecindexfinder
```

#### 从源码安装

```bash
# 克隆仓库
git clone https://github.com/your-repo/VecIndexFinder.git
cd VecIndexFinder

# 安装到本地环境
pip install -e .
```

#### 手动安装

```bash
# 克隆仓库
git clone https://github.com/your-repo/VecIndexFinder.git
cd VecIndexFinder

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate  # Windows

# 安装依赖
pip install -r vecindex_finder/requirements.txt
```

## 使用方法

### 命令行使用

安装后，您可以直接使用`vecindexfinder`命令：

```bash
vecindexfinder --config config.yml
```

或者使用Python模块方式运行：

```bash
python -m vecindex_finder.index_finder --config config.yml
```

### 基本用法

```bash
vecindexfinder --db milvus --table my_vectors --indices ivfflat,hnsw
```

### 完整参数说明

```
用法: vecindexfinder [选项]

选项:
  --config FILE                  配置文件路径，默认为config.yml
  --output-dir DIR               输出目录路径，默认为./results
  --reports-dir DIR              报告输出目录路径，默认为./reports
  --skip-sampling                跳过数据采样步骤，直接使用已有的采样数据
  --skip-distance-computation    跳过距离计算步骤，直接使用已有的距离数据
  --parallel-workers INT         并行工作线程数，不指定则使用配置文件中的设置
  --only-report                  只根据已有的分析结果生成报告，不进行分析
  --result-dir DIR               如果只生成报告，需指定结果目录路径
```

### TODO
1、根据召回差值，来修改参数的步长

### 示例

1. 基本用法（使用默认配置）:

```bash
vecindexfinder --db milvus --table my_vectors --indices ivfflat,hnsw
```

2. 指定采样比例和查询数据:

```bash
vecindexfinder --db milvus --table my_vectors --indices ivfflat,hnsw --sample-ratio 0.1 --query-count 5000
```

3. 使用自定义配置文件:

```bash
vecindexfinder --config my_config.yml
```

4. 优化QPS（速度优先）:

```bash
vecindexfinder --db milvus --table my_vectors --optimize-for qps --weight-qps 0.8 --weight-recall 0.2
```

5. 优化召回率（准确度优先）:

```bash
vecindexfinder --db milvus --table my_vectors --optimize-for recall --weight-qps 0.2 --weight-recall 0.8
```

## 作为库使用

您也可以在Python代码中直接导入使用:

```python
from vecindex_finder.core.analyzer import Analyzer
from vecindex_finder.core.config import config
from vecindex_finder.core.engine import db_engine

# 加载配置
config.prepare_with_yaml('config.yml')

# 初始化分析器
analyzer = Analyzer(db_engine, query_data, config)

# 分析获取最佳索引参数
best_result = analyzer.analyze()
print(f"最佳索引参数: {best_result}")
```

